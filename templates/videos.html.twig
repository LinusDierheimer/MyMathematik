{% extends "base.html.twig" %}

{% import _self as this %}

{% block content %}

    {% macro video(video) %}
        <div class="video">
            <div class="videotitle">
                {% if video.name is defined %}
                    {{ video.name }}
                {% else %}
                    {{ 'video.novideoname'|trans }}
                {% endif %}
            </div>
            <video controls>
                <source src="{{ video.source }}" type="video/mp4"></source>
                <source src="{{ video.source }}" type="video/ogg"></source>
                {{ 'videos.notsupported'|trans }}
            </video> 
        </div>
    {% endmacro %}

    <h1 class="classname">
        {{ 'videos.class'|trans }} {{ classes[class].name }}
    </h1>

    <div class="chapters">

        {% if videos.chapters is defined %}

            {% if videos.chapters|length > 0 %}
                {% for c1 in videos.chapters %}
                
                    <div class="chapter">
                        
                        <div class="chaptertitle">

                            <h1>
                                {% if c1.name is defined %}
                                    {{ c1.name }}   
                                {% else %}
                                    {{ 'video.nochaptername'|trans }}            
                                {% endif %}
                            </h1>

                            <img src="/assets/arrow_down.svg" class="dropdownbutton"></img>

                        </div>

                        <div class="chaptercontent">

                            {% if c1.chapters is defined %}

                                {% if c1.chapters|length > 0 %}
                                    {% for c2 in c1.chapters %}
                                    
                                        <div class="chapter">

                                            <div class="chaptertitle">

                                                <h2>
                                                    {% if c2.name is defined %}
                                                        {{ c2.name }}   
                                                    {% else %}
                                                        {{ 'video.nochaptername'|trans }}            
                                                    {% endif %}
                                                </h2>

                                                <img src="/assets/arrow_down.svg" class="dropdownbutton"></img>

                                            </div>
                                            
                                            <div class="chaptercontent">

                                                {% if c2.videos is defined %}
                                                    {% if c2.videos|length > 0 %}
                                                        {% for v2 in c2.videos %}
                                                            {{ this.video(v2) }}
                                                        {% endfor %}
                                                    {% else %}
                                                        <div class="nocontent">
                                                            {{ 'videos.novideos'|trans }}
                                                        </div>
                                                    {% endif %}
                                                {% endif %}
                                            
                                            </div>

                                        </div>

                                    {% endfor %}
                                {% else %}
                                    <div class="nocontent">
                                        {{ 'videos.nochapters'|trans }}
                                    </div>
                                {% endif %}

                            {% endif %}

                        </div>

                    </div>

                {% endfor %}  
            {% else %}
                <div class="nocontent">
                    {{ 'videos.nocontent'|trans }}
                </div>
            {% endif %}

            
        {% endif %}

    </div>

{% endblock %}